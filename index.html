<!doctype html>
<html lang="mn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Amarjargal üíò</title>

  <!-- Nice font for Mongolian + English -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ff9a9e;
      --bg2:#fad0c4;
      --card:#ffffffdd;
      --text:#222;
      --muted:#555;
      --accent:#ff4d6d;
      --accent2:#7c3aed;
      --shadow: 0 18px 45px rgba(0,0,0,.18);
      --radius:26px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      overflow-x:hidden;
    }
    .wrap{max-width:1040px; margin:0 auto; padding:26px 18px 70px;}
    .hero{
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid #fff;
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      padding:22px;
      overflow:hidden;
      position:relative;
    }
    .top{
      display:flex;
      gap:18px;
      align-items:center;
      flex-wrap:wrap;
    }
    .title{flex:1; min-width:260px;}
    h1{margin:0 0 8px; font-size:34px; letter-spacing:.2px}
    .subtitle{margin:0; color:var(--muted); font-size:16px; line-height:1.6}
    .avatars{
      display:flex; gap:12px; align-items:center;
    }
    .avatar{
      width:92px; height:92px;
      border-radius:999px;
      border:3px solid #fff;
      box-shadow:0 12px 28px rgba(0,0,0,.15);
      object-fit:cover;
      background:#fff;
    }
    .heartBadge{
      width:44px; height:44px;
      border-radius:999px;
      background:var(--accent);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
      box-shadow:0 12px 28px rgba(0,0,0,.15);
      user-select:none;
    }

    .section{
      margin-top:18px;
      background:var(--card);
      border:1px solid #fff;
      border-radius:var(--radius);
      padding:18px;
      box-shadow: 0 14px 34px rgba(0,0,0,.12);
    }
    .section h2{margin:0 0 10px; font-size:20px; letter-spacing:.2px;}
    .section p{margin:10px 0; line-height:1.7}

    .pillRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .pill{
      border:none;
      padding:11px 14px;
      border-radius:999px;
      background:var(--accent);
      color:#fff;
      font-weight:800;
      cursor:pointer;
      transition:.2s;
    }
    .pill.secondary{background:#111; opacity:.92}
    .pill.soft{background:var(--accent2)}
    .pill:hover{transform: translateY(-1px) scale(1.02)}
    .note{
      margin-top:10px;
      padding:12px 14px;
      border-radius:18px;
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
      color:var(--muted);
    }
    .tiny{font-size:13px; color:rgba(0,0,0,.55); margin-top:8px}

    /* Timeline */
    .timeline{display:grid; grid-template-columns: 1fr; gap:12px; margin-top:10px;}
    .event{
      display:flex;
      gap:14px;
      padding:14px;
      border-radius:22px;
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
      align-items:center;
      flex-wrap:wrap;
    }
    .event img{
      width:150px; height:100px;
      object-fit:cover;
      border-radius:18px;
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      background:#f3f3f3;
      cursor:pointer;
    }
    .event .meta{flex:1; min-width:220px;}
    .event .meta b{font-size:16px}
    .event .meta div{color:var(--muted); margin-top:4px; line-height:1.5}

    /* Scroll reveal */
    .reveal{opacity:0; transform: translateY(18px); transition: opacity .65s ease, transform .65s ease;}
    .reveal.show{opacity:1; transform: translateY(0);}

    /* Modal */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      background: rgba(0,0,0,.35);
      z-index:50;
    }
    .modal.open{display:flex}
    .modalCard{
      width:min(760px, 100%);
      background:#fff;
      border-radius:26px;
      padding:16px;
      box-shadow:0 18px 60px rgba(0,0,0,.35);
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:6px 6px 12px;
    }
    .x{
      border:none; background:#111; color:#fff;
      border-radius:999px; width:38px; height:38px;
      cursor:pointer; font-size:18px;
    }
    .modalImg{
      width:100%;
      max-height:56vh;
      object-fit:cover;
      border-radius:20px;
      background:#f3f3f3;
    }
    .modalText{padding:10px 6px 2px; color:var(--muted); line-height:1.7}

    /* Floating hearts */
    .float{position:fixed; left:0; top:0; pointer-events:none; z-index:1;}
    .float span{position:absolute; animation: rise 6s linear forwards; opacity:.92;}
    @keyframes rise{from{ transform: translateY(110vh); opacity:1 } to{ transform: translateY(-15vh); opacity:0 }}

    /* Slideshow */
    .slideshow{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      margin-top:10px;
    }
    .slideshow img{
      width:min(780px, 100%);
      height:320px;
      object-fit:cover;
      border-radius:22px;
      box-shadow:0 16px 36px rgba(0,0,0,.18);
      background:#f3f3f3;
      transition: opacity .4s ease;
    }
    .navBtn{
      border:none;
      width:48px; height:48px;
      border-radius:999px;
      background:#111;
      color:#fff;
      font-size:26px;
      cursor:pointer;
      opacity:.92;
    }
    .navBtn:hover{transform: scale(1.04)}

    /* Travel cards */
    .travelGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
      margin-top:12px;
    }
    @media (max-width: 920px){
      .travelGrid{grid-template-columns: repeat(2, minmax(0, 1fr));}
    }
    @media (max-width: 560px){
      .travelGrid{grid-template-columns: 1fr;}
    }
    .travelCard{
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
      border-radius:22px;
      padding:12px;
      box-shadow:0 12px 26px rgba(0,0,0,.10);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .travelCard img{
      width:100%;
      height:160px;
      object-fit:cover;
      border-radius:18px;
      background:#f3f3f3;
      cursor:pointer;
    }
    .travelTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .travelTitle b{font-size:16px}
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(124, 58, 237, .12);
      color: #4c1d95;
      font-weight:700;
      white-space:nowrap;
    }
    .travelDesc{color:var(--muted); line-height:1.55; font-size:14px}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hero">
      <div class="top">
        <div class="title">
          <h1>–°–∞–π–Ω —É—É –ê–º–∞—Ä–∂–∞—Ä–≥–∞–ª üíò</h1>
          <p class="subtitle">
            –ë–∏ —ç–Ω—ç –∂–∏–∂–∏–≥ —Ö—É—É–¥—Å—ã–≥ <b>–µ—Å–¥“Ø–≥—ç—ç—Ä —Å–∞—Ä–∞–∞—Å</b> —ç—Ö–ª—ç—ç–¥ ”©–Ω”©”©–¥—Ä–∏–π–≥ —Ö“Ø—Ä—Ç—ç–ª –±–∏–¥–Ω–∏–π –º”©—á“Ø“Ø–¥—ç—ç—Ä ‚Äú–∞—è–ª—É—É–ª–∞—Ö‚Äù –≥—ç–∂ —Ö–∏–π–ª—ç—ç.
            –ú”©–Ω —Ö–∞–º–≥–∏–π–Ω —á—É—Ö–∞–ª –Ω—ç–≥ —Ç“Ø“Ø—Ö –±–∞–π–Ω–∞‚Ä¶ <b>–∂–æ–æ–º–Ω—ã —Ç“Ø“Ø—Ö</b> üò≠ü™≥üòÇ
          </p>
        </div>

        <div class="avatars" aria-label="Our photos">
          <img class="avatar" src="me.jpg" alt="My photo">
          <div class="heartBadge" title="us">üíû</div>
          <img class="avatar" src="amar.jpg" alt="Amarjargal photo">
        </div>
      </div>

      <div class="pillRow">
        <button class="pill" onclick="startJourney()">Time travel —ç—Ö–ª“Ø“Ø–ª—å–µ ‚ú®</button>
        <button class="pill soft" onclick="showCourageNote()">–ß–∞–º–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω –∑–æ—Ä–∏–≥ üíú</button>
        <button class="pill secondary" onclick="cockroachStory()">–ñ–æ–æ–º–Ω—ã —Ç“Ø“Ø—Ö ü™≥üòÇ</button>
      </div>

      <div id="heroNote" class="note" style="display:none;"></div>
      <div class="tiny">Tip: —è–º–∞—Ä —á –∑—É—Ä–∞–≥ –¥—ç—ç—Ä –¥–∞—Ä–≤–∞–ª —Ç–æ–º–æ–æ—Ä –Ω—ç—ç–≥–¥—ç–Ω—ç ‚ú®</div>
    </div>

    <!-- MUSIC -->
    <div class="section">
      <h2>üéµ Our background song</h2>
      <p>Play –¥–∞—Ä–∞—Ö–∞–¥ –ª –±–æ–ª–Ω–æ ‚Äî browser –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç–æ–≥–ª—É—É–ª–∞—Ö—ã–≥ —Ö–∞–∞–¥–∞–≥ –±–æ–ª–æ—Ö–æ–æ—Ä –∏–Ω–≥—ç–∂ —Ö–∏–π—Ö –Ω—å –∑”©–≤ –∞—Ä–≥–∞ üòä</p>

      <div class="pillRow">
        <button class="pill" onclick="toggleMusic()">Play / Pause üé∂</button>
        <button class="pill soft" onclick="music.volume=Math.min(1, music.volume+0.1); updateMusicStatus()">Volume +</button>
        <button class="pill secondary" onclick="music.volume=Math.max(0, music.volume-0.1); updateMusicStatus()">Volume -</button>
      </div>

      <div class="note" id="musicStatus">Music is paused üôÇ</div>

      <audio id="bgm" loop>
        <source src="music.mp3" type="audio/mpeg">
      </audio>
    </div>

    <!-- SLIDESHOW + GIF -->
    <div class="section">
      <h2>üñºÔ∏è Mini photo slideshow</h2>
      <p>–ó–∞—Ä–∏–º –º”©—á“Ø“Ø–¥–∏–π–≥ –¥–∞—Ö–∏–Ω –¥–∞—Ö–∏–Ω “Ø–∑–º—ç—ç—Ä –±–∞–π–¥–∞–≥ —à“Ø“Ø üòå</p>

      <div class="slideshow">
        <button class="navBtn" onclick="prevSlide()" aria-label="Previous slide">‚Äπ</button>
        <img id="slideImg" src="slide1.jpg" alt="Slideshow image">
        <button class="navBtn" onclick="nextSlide()" aria-label="Next slide">‚Ä∫</button>
      </div>
      <div class="tiny" id="slideCaption">Slide 1</div>

      <div style="margin-top:12px;">
        <img src="roach.gif" alt="Funny gif" style="max-width:170px; border-radius:18px; display:none;" id="roachGif">
        <div class="tiny">P.S. –¢–∏–π–º —ç—ç, GIF –∞–∂–∏–ª–ª–∞–Ω–∞ üò≠ü™≥</div>
        <button class="pill secondary" onclick="toggleGif()">Show/Hide cockroach gif ü™≥üòÇ</button>
      </div>
    </div>

    <!-- TRAVEL PICKER -->
    <div class="section" id="travelSection">
      <h2>üß≥ Where should we travel?</h2>
      <p>
        –•—ç—Ä–≤—ç—ç –Ω—ç–≥ ”©–¥”©—Ä —Ö–∞–º—Ç –∞—è–ª–±–∞–ª‚Ä¶ –∞–ª—å —Ö–æ—Ç —Ä—É—É —è–≤–º–∞–∞—Ä –±–∞–π–Ω–∞? üíò
        <br/>Choose one ‚Äî –±–∏ —Ç—ç—Ä–∏–π–≥ ‚ÄúNext chapter‚Äù –¥—ç—ç—Ä –Ω—ç–º—ç—ç–¥ –±–∏—á—ç—ç–¥ ”©–≥–Ω”© üò≥‚ú®
      </p>

      <div class="travelGrid" id="travelGrid"></div>
      <div id="travelChoice" class="note">Pick a city üíñ</div>
    </div>

    <!-- TIMELINE -->
    <div class="section" id="timelineSection">
      <h2>üìñ Our little timeline</h2>
      <p>–ï—Å–¥“Ø–≥—ç—ç—Ä —Å–∞—Ä–∞–∞—Å —ç—Ö–ª—ç—ç–¥ ”©–Ω”©”©–¥—Ä–∏–π–≥ —Ö“Ø—Ä—Ç—ç–ª‚Ä¶ –Ω—ç–≥ –Ω—ç–≥—ç—ç—Ä—ç—ç üíó</p>
      <div class="timeline" id="timeline"></div>
    </div>

    <!-- COURAGE NOTES -->
    <div class="section">
      <h2>üìù Notes for you</h2>
      <p>–•—ç—Ü“Ø“Ø ”©–¥”©—Ä—Ç —á–∏–Ω—å –∂–∏–∂–∏–≥—Ö—ç–Ω –∑–æ—Ä–∏–≥ ”©–≥”©—Ö “Ø–≥—Å üíú</p>
      <div class="pillRow">
        <button class="pill" onclick="randomNote()">–ù—ç–≥ note ”©–≥”©”©—á üå∑</button>
        <button class="pill soft" onclick="allNotes()">–ë“Ø–≥–¥–∏–π–≥ –Ω—å “Ø–∑—å–µ üìö</button>
      </div>
      <div id="notesBox" class="note">Click a button above üíñ</div>
    </div>

    <!-- NEXT CHAPTER -->
    <div class="section">
      <h2>üå∏ Next chapter?</h2>
      <p>
        –•—ç—Ä–≤—ç—ç –±–æ–ª–æ–º–∂—Ç–æ–π –±–æ–ª‚Ä¶ —à–∏–Ω—ç –¥—É—Ä—Å–∞–º–∂ —Ö–∏–π–µ ‚òï‚ú®
        (–¢—ç–≥—ç—ç–¥ —ç–Ω—ç –≤–µ–± –¥—ç—ç—Ä ‚Äú—à–∏–Ω—ç –∑—É—Ä–∞–≥‚Äù –Ω—ç–º–Ω—ç üòå)
      </p>
      <div class="pillRow">
        <button class="pill" onclick="nextChapterYes()">If you say yes‚Ä¶ üò≥</button>
        <button class="pill secondary" onclick="nextChapterNo()">If you say no‚Ä¶ üôà</button>
      </div>
      <div id="nextBox" class="note" style="display:none;"></div>
    </div>
  </div>

  <!-- IMAGE MODAL -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Image preview">
    <div class="modalCard">
      <div class="modalTop">
        <b id="modalTitle">Memory</b>
        <button class="x" onclick="closeModal()" aria-label="Close">‚úï</button>
      </div>
      <img id="modalImg" class="modalImg" alt="Preview"/>
      <div id="modalText" class="modalText"></div>
    </div>
  </div>

  <div class="float" id="float"></div>

  <script>
    // ========= DATA YOU CAN EDIT =========

    // Timeline (edit titles/text to your real memories)
    const EVENTS = [
      { month: "September", img: "sep.jpg", title: "–ë–∏–¥ —Ç–∞–Ω–∏–ª—Ü—Å–∞–Ω üå±", text: "–¢—ç—Ä “Ø–µ—ç—Å —Ö–æ–π—à –º–∏–Ω–∏–π ”©–¥—Ä“Ø“Ø–¥ ”©”©—Ä –±–æ–ª–∂ —ç—Ö—ç–ª—Å—ç–Ω." },
      { month: "October",    img: "oct.jpg", title: "–ò–ª“Ø“Ø –æ–ª–æ–Ω —è—Ä–∏–∞ ‚ú®", text: "–ß–∞–º—Ç–∞–π —è—Ä–∏–ª—Ü–∞—Ö–∞–¥ –Ω—ç–≥ –ª –∞–º–∞—Ä—Ö–∞–Ω‚Ä¶ —Ç—ç–≥—ç—ç–¥ –±–∏ –∏—Ö –∏–Ω—ç—ç–¥—ç–≥ –±–æ–ª—Å–æ–Ω." },
      { month: "November",   img: "nov.jpg", title: "–î–æ—Ç–æ–æ–¥ –æ–Ω–∏–≥–æ–æ —ç—Ö—ç–ª—Å—ç–Ω üòÑ", text: "–ú–∞–Ω–∞–π –∂–∏–∂–∏–≥ —Ö–æ—à–∏–≥–Ω–æ–ª—É—É–¥ ‚Äú–±–∏–¥–Ω–∏–π —é–º‚Äù –±–æ–ª–æ–æ–¥ –≥–æ—ë —Å–∞–Ω–∞–≥–¥—Å–∞–Ω." },
      { month: "December",   img: "dec.jpg", title: "–î—É–ª–∞–∞–Ω –º”©—á“Ø“Ø–¥ ‚ùÑÔ∏è", text: "–•“Ø–π—Ç—ç–Ω –±–∞–π—Å–∞–Ω —á —á–∏ –¥—É–ª–∞–∞—Ö–∞–Ω –º—ç–¥—Ä—ç–º–∂ ”©–≥—Å”©–Ω." },
      { month: "January",    img: "jan.jpg", title: "–ù—ç–≥ –∑“Ø–π–ª –æ–π–ª–≥–æ—Å–æ–Ω üí≠", text: "–°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π “Ø–µ–¥ —á–∞–º–∞–π–≥ –±–æ–¥–¥–æ–≥ –±–æ–ª—Å–æ–Ω." },
      { month: "Now",        img: "now.jpg", title: "”®–Ω”©”©–¥”©—Ä üíò", text: "–û–¥–æ–æ —á –≥—ç—Å—ç–Ω‚Ä¶ –±–∞—è—Ä–ª–∞–ª–∞–∞ –≥—ç–∂ —Ö—ç–ª–º—ç—ç—Ä –±–∞–π–Ω–∞. –ë–∞—Å –∂–∞–∞—Ö–∞–Ω —Å–∞–Ω–¥–∞—Ä—á –±–∞–π–Ω–∞ üò≥" }
    ];

    // Courage notes
    const COURAGE_NOTES = [
      "–ß–∏ ”©”©—Ä–∏–π–≥”©”© –±–æ–¥—Å–æ–Ω–æ–æ—Å–æ–æ –∏–ª“Ø“Ø —Ö“Ø—á—Ç—ç–π.",
      "–ß–∏ —Ö–∞–Ω–≥–∞–ª—Ç—Ç–∞–π —Å–∞–π–Ω.",
      "–ß–∏–Ω–∏–π —Ö–∏—á—ç—ç–ª –∑“Ø—Ç–≥—ç–ª “Ø–Ω—ç—Ö—ç—ç—Ä –≥–∞–π—Ö–∞–ª—Ç–∞–π.",
      "–ê–ª–¥–∞–∞ –≥–∞—Ä–≥–∞—Å–∞–Ω —á —á–∏ “Ø–Ω—ç —Ü—ç–Ω—ç—Ç—ç–π —Ö—ç–≤—ç—ç—Ä.",
      "”®–Ω”©”©–¥”©—Ä —Ö—ç—Ü“Ø“Ø –±–∞–π–≤–∞–ª –≥–∞–Ω—Ü–∞–∞—Ä–∞–∞ “Ø“Ø—Ä—ç—Ö —Ö—ç—Ä—ç–≥–≥“Ø–π.",
      "–ß–∏ —Ö“Ø–º“Ø“Ø—Å–∏–π–Ω ”©–¥—Ä–∏–π–≥ –≥—ç—Ä—ç–ª—Ç—ç–π –±–æ–ª–≥–æ–¥–æ–≥."
    ];

    // Slideshow
    const slides = [
      {src:"slide1.jpg", cap:"Slide 1 ‚Äî (—ç–Ω–¥ —Ç–∞–π–ª–±–∞—Ä –±–∏—á—ç—ç—Ä—ç–π)"},
      {src:"slide2.jpg", cap:"Slide 2 ‚Äî (—ç–Ω–¥ —Ç–∞–π–ª–±–∞—Ä –±–∏—á—ç—ç—Ä—ç–π)"},
      {src:"slide3.jpg", cap:"Slide 3 ‚Äî (—ç–Ω–¥ —Ç–∞–π–ª–±–∞—Ä –±–∏—á—ç—ç—Ä—ç–π)"}
    ];

    // Travel choices (China cities + Seoul + Bangkok)
    const TRAVELS = [
      { id:"beijing",  country:"China",  tag:"History",     city:"Beijing",   img:"beijing.jpg",  text:"Great Wall + forbidden city vibes üèØ" },
      { id:"shanghai", country:"China",  tag:"City lights", city:"Shanghai",  img:"shanghai.jpg", text:"Skylines, night walk, cute photos üåÉ" },
      { id:"chengdu",  country:"China",  tag:"Chill",       city:"Chengdu",   img:"chengdu.jpg",  text:"Pandas + spicy food + slow days üêºüå∂Ô∏è" },
      { id:"hangzhou", country:"China",  tag:"Romantic",    city:"Hangzhou",  img:"hangzhou.jpg", text:"West Lake + calm, dreamy ÎäêÎÇå üåø" },
      { id:"seoul",    country:"Korea",  tag:"K-vibe",      city:"Seoul",     img:"seoul.jpg",    text:"Caf√©s + night views + shopping üòå‚ú®" },
      { id:"bangkok",  country:"Thailand", tag:"Fun",       city:"Bangkok",   img:"bangkok.jpg",  text:"Street food + temples + chaos-but-fun üåà" }
    ];

    // ========= ELEMENTS =========
    const timelineEl = document.getElementById("timeline");
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalTitle = document.getElementById("modalTitle");
    const modalText = document.getElementById("modalText");
    const float = document.getElementById("float");

    // Music
    const music = document.getElementById("bgm");
    const musicStatus = document.getElementById("musicStatus");

    // Slideshow
    let slideIndex = 0;
    const slideImg = document.getElementById("slideImg");
    const slideCaption = document.getElementById("slideCaption");

    // Travel
    const travelGrid = document.getElementById("travelGrid");
    const travelChoice = document.getElementById("travelChoice");
    let chosenTravelId = null;

    // ========= HELPERS =========
    function showHero(text){
      const box = document.getElementById("heroNote");
      box.style.display = "block";
      box.textContent = text;
    }

    function popHearts(count){
      for(let i=0;i<count;i++){
        const s = document.createElement("span");
        s.textContent = ["üíó","üíñ","üíò","üíû"][Math.floor(Math.random()*4)];
        s.style.left = Math.random()*100 + "vw";
        s.style.fontSize = (18 + Math.random()*22) + "px";
        s.style.animationDuration = (4.5 + Math.random()*2.5) + "s";
        float.appendChild(s);
        setTimeout(() => s.remove(), 7000);
      }
    }

    // ========= MODAL =========
    function openModal(title, img, text){
      modalTitle.textContent = title;
      modalImg.src = img;
      modalImg.alt = title;
      modalText.textContent = text || "";
      modal.classList.add("open");
      popHearts(8);
    }
    function closeModal(){ modal.classList.remove("open"); }
    modal.addEventListener("click", (ev) => { if(ev.target === modal) closeModal(); });

    // ========= TIMELINE =========
    function renderTimeline(){
      timelineEl.innerHTML = "";
      EVENTS.forEach((e) => {
        const card = document.createElement("div");
        card.className = "event reveal";
        card.innerHTML = `
          <img src="${e.img}" alt="${e.month} memory" />
          <div class="meta">
            <b>${e.month} ‚Äî ${e.title}</b>
            <div>${e.text}</div>
          </div>
          <button class="pill soft" style="padding:10px 12px" type="button">Open</button>
        `;
        const imgEl = card.querySelector("img");
        const btnEl = card.querySelector("button");
        imgEl.addEventListener("click", () => openModal(`${e.month} ‚Äî ${e.title}`, e.img, e.text));
        btnEl.addEventListener("click", () => openModal(`${e.month} ‚Äî ${e.title}`, e.img, e.text));
        timelineEl.appendChild(card);
      });

      setupReveal();
    }

    function setupReveal(){
      const items = document.querySelectorAll(".reveal");
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting) e.target.classList.add("show");
        });
      }, { threshold: 0.15 });
      items.forEach(i => obs.observe(i));
    }

    // ========= HERO BUTTONS =========
    function startJourney(){
      document.getElementById("timelineSection").scrollIntoView({behavior:"smooth"});
      popHearts(16);
      showHero("–ó–∞ üò≥‚ú® –Ω—ç–≥ –Ω—ç–≥—ç—ç—Ä –Ω—å –±—É—Ü–∞–∞–¥ –∞—è–ª—ä—è. –ß–∏ –º–∏–Ω–∏–π ”©–¥—Ä–∏–π–≥ –∏–ª“Ø“Ø –æ–Ω—Ü–≥–æ–π –±–æ–ª–≥–æ—Å–æ–Ω —à“Ø“Ø üíñ");
    }

    function showCourageNote(){
      const n = COURAGE_NOTES[Math.floor(Math.random()*COURAGE_NOTES.length)];
      popHearts(10);
      showHero("–ß–∞–º–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω –∑–æ—Ä–∏–≥: ‚Äú" + n + "‚Äù üíú");
    }

    function cockroachStory(){
      popHearts(14);
      const travelBit = chosenTravelId ? `–î–∞—Ä–∞–∞ –Ω—å —Ö–∞–º—Ç ${getTravelName(chosenTravelId)} —Ä—É—É —è–≤–±–∞–ª‚Ä¶ –Ω–∞–º–∞–π–≥ –∂–æ–æ–º–æ–æ—Ä –±“Ø“Ø –∞–π–ª–≥–∞–∞—Ä–∞–π üò≠ü™≥` : "–ù–∞–º–∞–π–≥ –∂–æ–æ–º–æ–æ—Ä –±“Ø“Ø –∞–π–ª–≥–∞–∞—Ä–∞–π üò≠ü™≥";
      showHero("–ú–∞—à —á—É—Ö–∞–ª –º—ç–¥—ç–≥–¥—ç–ª ü™≥üòÇ: –ë–∏ –∂–æ–æ–º–Ω–æ–æ—Å –∞–π–¥–∞–≥‚Ä¶ —Ö–∞—Ä–∏–Ω —á–∏ –Ω–∞–º–∞–π–≥ –∞–π–ª–≥–∞—Ö–¥–∞–∞ “Ø–Ω—ç—Ö—ç—ç—Ä –º—É–Ω–¥–∞–≥ üò≠ –ì—ç—Ö–¥—ç—ç –æ–¥–æ–æ –±–æ–¥–æ—Ö–æ–¥ –∏–Ω—ç—ç–¥—Ç—ç–π –¥—É—Ä—Å–∞–º–∂ –±–æ–ª—Å–æ–Ω. " + travelBit);
    }

    // ========= COURAGE NOTES =========
    function randomNote(){
      const n = COURAGE_NOTES[Math.floor(Math.random()*COURAGE_NOTES.length)];
      document.getElementById("notesBox").textContent = "üíú " + n;
      popHearts(8);
    }
    function allNotes(){
      document.getElementById("notesBox").innerHTML =
        "üíñ " + COURAGE_NOTES.map(x => "‚Ä¢ " + x).join("<br/>");
      popHearts(10);
    }

    // ========= NEXT CHAPTER =========
    function nextChapterYes(){
      const box = document.getElementById("nextBox");
      box.style.display = "block";
      const chosen = chosenTravelId ? ` –ë–∏–¥–Ω–∏–π –∞—è–ª–∞–ª: ${getTravelName(chosenTravelId)} üß≥üíò` : "";
      box.textContent = "–ó–∞ —Ç—ç–≥–≤—ç–ª‚Ä¶ —á–∏ –Ω–∞–º–∞–π–≥ –º–∞—à –∏—Ö –±–∞—è—Ä–ª—É—É–ª–ª–∞–∞ üò≠üíñ –•—ç–∑—ç—ç –∑–∞–≤—Ç–∞–π –≤—ç? –ë–∏ –∫–æ—Ñ–µ/–∞–ª—Ö–∞–ª—Ç–∞–Ω–¥ –±—ç–ª—ç–Ω ‚òï‚ú®" + chosen;
      popHearts(18);
    }
    function nextChapterNo(){
      const box = document.getElementById("nextBox");
      box.style.display = "block";
      box.textContent = "–ó“Ø–≥—ç—ç—Ä —ç—ç üòä –ë–∏ –∑“Ø–≥—ç—ç—Ä –ª —á–∞–º–¥ —Ö—ç–ª–º—ç—ç—Ä –±–∞–π—Å–∞–Ω: —á–∏ –Ω–∞–¥–∞–¥ –æ–Ω—Ü–≥–æ–π. “Æ“Ø–Ω–∏–π–≥ —É–Ω—à—Å–∞–Ω–¥ –±–∞—è—Ä–ª–∞–ª–∞–∞ üíñ";
      popHearts(10);
    }

    // ========= MUSIC =========
    function updateMusicStatus(){
      const vol = Math.round((music.volume || 0) * 100);
      if(music.paused){
        musicStatus.textContent = `Music is paused üôÇ (volume ${vol}%)`;
      } else {
        musicStatus.textContent = `Music is playing üíòüé∂ (volume ${vol}%)`;
      }
    }
    function toggleMusic(){
      if(music.paused){
        music.play().then(()=> {
          updateMusicStatus();
          popHearts(10);
        }).catch(() => {
          musicStatus.textContent = "Autoplay blocked üôÇ Tap Play again.";
        });
      } else {
        music.pause();
        updateMusicStatus();
      }
    }

    // ========= SLIDESHOW =========
    function renderSlide(){
      slideImg.style.opacity = 0;
      setTimeout(()=>{
        slideImg.src = slides[slideIndex].src;
        slideCaption.textContent = slides[slideIndex].cap;
        slideImg.style.opacity = 1;
      }, 200);
    }
    function nextSlide(){ slideIndex = (slideIndex+1) % slides.length; renderSlide(); popHearts(4); }
    function prevSlide(){ slideIndex = (slideIndex-1+slides.length) % slides.length; renderSlide(); popHearts(4); }
    setInterval(nextSlide, 4500);

    // GIF toggle
    function toggleGif(){
      const g = document.getElementById("roachGif");
      const isHidden = (g.style.display === "none" || !g.style.display);
      g.style.display = isHidden ? "block" : "none";
      if(isHidden){
        showHero("‚ö†Ô∏è WARNING: cockroach mode activated ü™≥üòÇ (—Ç–∞–π–≤–∞–Ω —à“Ø“Ø ‚Äî —ç–Ω—ç –±–æ–ª GIF –ª –¥—ç—ç üò≠)");
        popHearts(10);
      }
    }

    // ========= TRAVEL PICKER =========
    function renderTravels(){
      travelGrid.innerHTML = "";
      TRAVELS.forEach(t => {
        const el = document.createElement("div");
        el.className = "travelCard reveal";
        el.innerHTML = `
          <img src="${t.img}" alt="${t.city}" />
          <div class="travelTitle">
            <b>${t.city}</b>
            <span class="tag">${t.country} ‚Ä¢ ${t.tag}</span>
          </div>
          <div class="travelDesc">${t.text}</div>
          <div class="pillRow" style="margin-top:2px;">
            <button class="pill soft" type="button">Choose üíò</button>
            <button class="pill secondary" type="button">Open üñºÔ∏è</button>
          </div>
        `;

        const imgEl = el.querySelector("img");
        const btnChoose = el.querySelectorAll("button")[0];
        const btnOpen = el.querySelectorAll("button")[1];

        imgEl.addEventListener("click", ()=> openModal(`${t.city} ‚ú®`, t.img, t.text));
        btnOpen.addEventListener("click", ()=> openModal(`${t.city} ‚ú®`, t.img, t.text));
        btnChoose.addEventListener("click", ()=> chooseTravel(t.id));

        travelGrid.appendChild(el);
      });

      setupReveal();
    }

    function getTravelName(id){
      const t = TRAVELS.find(x => x.id === id);
      return t ? `${t.city}` : "that city";
    }

    function chooseTravel(id){
      chosenTravelId = id;
      const t = TRAVELS.find(x => x.id === id);
      if(!t) return;
      travelChoice.textContent = `Chosen: ${t.city} üíò ‚Äî ${t.text}`;
      popHearts(14);
      showHero(`–ó–∞ üò≥‚ú® —Ç—ç–≥–≤—ç–ª –Ω—ç–≥ ”©–¥”©—Ä‚Ä¶ ${t.city} —Ä—É—É —Ö–∞–º—Ç –∞—è–ª—ä—è –≥—ç–∂ –±–æ–¥—ä—ë. (–ë–∏ —ç–Ω—ç —Ö—ç—Å–≥–∏–π–≥ –±“Ø—Ä –∏–ª“Ø“Ø –≥–æ—ë –±–æ–ª–≥–æ–Ω–æ!)`);
    }

    // ========= INIT =========
    renderTimeline();
    renderTravels();
    renderSlide();
    setTimeout(()=>popHearts(6), 500);
  </script>
</body>
</html>